<p-toast></p-toast>
<div class="card">
    <p-table
        [columns]="cols"
        [value]="techList"
        [tableStyle]="{ 'min-width': '20rem' }"
    >
        <ng-template pTemplate="header" let-columns>
            <tr>
                <th *ngFor="let col of columns" style="min-width: 10rem">
                    {{ col.header }}
                </th>
                <th style="min-width: 2rem">Diagnostique</th>
                <th style="min-width: 2rem">Reparation</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-columns="columns">
            <tr>
                <td *ngFor="let col of columns">
                    <ng-container
                        *ngIf="col.field !== 'status'; else statusColumn"
                    >
                        {{ rowData[col.field] }}
                    </ng-container>
                    <ng-template #statusColumn>
                        <p-tag
                            [value]="rowData[col.field]"
                            [severity]="getSeverity(rowData[col.field])"
                        ></p-tag>
                    </ng-template>
                </td>
                <td>
                    <button
                        pButton
                        pRipple
                        icon="pi pi-search"
                        class="p-button-rounded p-button-raised p-button-secondary mr-2"
                        (click)="diagModal(rowData)"
                    ></button>
                </td>
                <td>
                    <button
                        pButton
                        pRipple
                        icon="pi pi-wrench"
                        class="p-button-rounded p-button-raised p-button-secondary mr-2"
                        (click)="repModal(rowData)"
                    ></button>
                </td>
            </tr>
        </ng-template>
    </p-table>
    <p-dialog
        [(visible)]="diDialogDiag"
        [style]="{ width: '50%', height: '70vh' }"
        header="Diagnostique ..."
        [modal]="true"
        styleClass="p-fluid"
    >
        <!-- -------- -->

        <form [formGroup]="diagFormTech">
            <div class="flex flex-column">
                <div class="field">
                    <label for="name">Ecrire quelque chose ...</label>
                    <!-- Dropdwon tech for reparation -->
                    <textarea
                        formControlName="remarqueTech"
                        rows="5"
                        cols="30"
                        pInputTextarea
                    ></textarea>
                </div>
                <!-- pdr or no -->
                <div class="condition-BTN">
                    <div class="field">
                        <label for="name">Cette piece reparable ?</label>
                        <p-toggleButton
                            onLabel="Oui"
                            offLabel="Non"
                            formControlName="isReparable"
                        ></p-toggleButton>
                    </div>
                    <div class="field">
                        <label for="name">Di contient PDR ?</label>
                        <p-toggleButton
                            onLabel="Oui"
                            offLabel="Non"
                            formControlName="isPdr"
                        ></p-toggleButton>
                    </div>
                </div>

                <!-- reparable or no -->

                <!-- list of composant -->
                <div class="grid align-items-center">
                    <div class="col">
                        <label for="name">Choisir un composant</label>
                        <p-dropdown
                            [options]="composantList"
                            (onChange)="selectedDropDown($event)"
                            optionLabel="name"
                            placeholder="Choisir composant"
                        ></p-dropdown>
                    </div>
                    <div class="col" *ngIf="composantSelected">
                        <label for="name">Quantit√©</label>
                        <p-inputNumber
                            inputId="integeronly"
                            formControlName="quantity"
                            [placeholder]="
                                'Add quantity for' +
                                ' ' +
                                composantSelected.value.name
                            "
                        >
                        </p-inputNumber>
                    </div>
                    <div class="col" *ngIf="composantSelected">
                        <button
                            pButton
                            pRipple
                            label="Ajouter"
                            class="p-button-success"
                            icon="pi pi-check"
                            (click)="comboComposantandQuantity()"
                        ></button>
                    </div>
                </div>
                <div class="chips">
                    <div class="card p-fluid">
                        <p-chips [(ngModel)]="arrayTESTONLY"></p-chips>
                    </div>
                </div>

                <div class="field">
                    <!-- to continue other rq -->
                    <p-fieldset legend="Remarque" [toggleable]="true">
                        <p class="m-0">Remarque coordinateur + manager</p>
                    </p-fieldset>
                </div>
            </div>
        </form>

        <ng-template pTemplate="footer">
            <span>{{ minutes }}:{{ seconds }}:{{ milliseconds }}</span>
            <button
                pButton
                pRipple
                label="Cancel"
                icon="pi pi-times"
                class="p-button-text"
                (click)="hideDialog()"
            ></button>
            <button
                pButton
                pRipple
                label="Je reviendrai"
                icon="pi pi-check"
                class="p-button-text"
                (click)="lapTimeForPauseAndGetBack()"
            ></button>
            <button
                pButton
                pRipple
                label="J'ai fini"
                icon="pi pi-check"
                class="p-button-text"
                (click)="techFinishDiag()"
            ></button>
        </ng-template>
    </p-dialog>
    <p-dialog
        [(visible)]="diDialogRep"
        [style]="{ width: '50%', height: '70vh' }"
        header="Reparation ..."
        [modal]="true"
        styleClass="p-fluid"
    >
        <!-- -------- -->

        <div class="flex flex-column">
            <div class="field">
                <label for="name">Ecrire quelque chose ...</label>
                <!-- Dropdwon tech for reparation -->
                <textarea
                    [(ngModel)]="remarqueReparation"
                    rows="5"
                    cols="30"
                    pInputTextarea
                ></textarea>
            </div>

            <div class="field">
                <!-- to continue other rq -->
                <p-fieldset legend="Remarque" [toggleable]="true">
                    <p class="m-0">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit,
                        sed do eiusmod tempor incididunt ut labore et dolore
                        magna aliqua. Ut enim ad minim veniam, quis nostrud
                        exercitation ullamco laboris nisi ut aliquip ex ea
                        commodo consequat. Duis aute irure dolor in
                        reprehenderit in voluptate velit esse cillum dolore eu
                        fugiat nulla pariatur. Excepteur sint occaecat cupidatat
                        non proident, sunt in culpa qui officia deserunt mollit
                        anim id est laborum.
                    </p>
                </p-fieldset>
            </div>
            <div class="field">
                <!-- to continue other rq -->
                <p-fieldset legend="Remarque" [toggleable]="true">
                    <p class="m-0">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit,
                        sed do eiusmod tempor incididunt ut labore et dolore
                        magna aliqua. Ut enim ad minim veniam, quis nostrud
                        exercitation ullamco laboris nisi ut aliquip ex ea
                        commodo consequat. Duis aute irure dolor in
                        reprehenderit in voluptate velit esse cillum dolore eu
                        fugiat nulla pariatur. Excepteur sint occaecat cupidatat
                        non proident, sunt in culpa qui officia deserunt mollit
                        anim id est laborum.
                    </p>
                </p-fieldset>
            </div>
            <div class="field">
                <!-- to continue other rq -->
                <p-fieldset legend="Remarque" [toggleable]="true">
                    <p class="m-0">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit,
                        sed do eiusmod tempor incididunt ut labore et dolore
                        magna aliqua. Ut enim ad minim veniam, quis nostrud
                        exercitation ullamco laboris nisi ut aliquip ex ea
                        commodo consequat. Duis aute irure dolor in
                        reprehenderit in voluptate velit esse cillum dolore eu
                        fugiat nulla pariatur. Excepteur sint occaecat cupidatat
                        non proident, sunt in culpa qui officia deserunt mollit
                        anim id est laborum.
                    </p>
                </p-fieldset>
            </div>
        </div>

        <ng-template pTemplate="footer">
            <span>{{ minutes1 }}:{{ seconds1 }}:{{ milliseconds1 }}</span>
            <button
                pButton
                pRipple
                label="Cancel"
                icon="pi pi-times"
                class="p-button-text"
                (click)="hideDialogRep()"
            ></button>
            <button
                pButton
                pRipple
                label="Je reviendrai"
                icon="pi pi-check"
                class="p-button-text"
                (click)="lapTimeForPauseAndGetBack1()"
            ></button>
            <button
                pButton
                pRipple
                label="J'ai fini"
                icon="pi pi-check"
                class="p-button-text"
                (click)="finishReparation()"
            ></button>
        </ng-template>
    </p-dialog>
    <p-confirmDialog [style]="{ width: '450px' }"></p-confirmDialog>
</div>
