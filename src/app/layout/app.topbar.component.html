<div class="layout-topbar">
    <a class="layout-topbar-logo" routerLink="">
        <img
            src="assets/layout/images/{{
                layoutService.config().colorScheme === 'light'
                    ? 'Fixtronix-logo'
                    : 'Fixtronix-logo'
            }}.png"
            alt="logo"
        />
    </a>

    <button
        #menubutton
        class="p-link layout-menu-button layout-topbar-button"
        (click)="layoutService.onMenuToggle()"
    >
        <i class="pi pi-bars"></i>
    </button>

    <button
        #topbarmenubutton
        class="p-link layout-topbar-menu-button layout-topbar-button"
        (click)="layoutService.showProfileSidebar()"
    >
        <i class="pi pi-ellipsis-v"></i>
    </button>

    <div
        #topbarmenu
        class="layout-topbar-menu"
        [ngClass]="{
            'layout-topbar-menu-mobile-active':
                layoutService.state.profileSidebarVisible
        }"
    >
        <p-button
            (click)="notification('top')"
            label="Reminder Test"
            [badge]="nbReminder"
        />
        <button
            (click)="logout('top-right')"
            class="p-link layout-topbar-button"
        >
            <i class="pi pi-user"></i>
            <span>Profile</span>
        </button>
    </div>
    <p-dialog
        header="Alert"
        [modal]="true"
        [(visible)]="visible"
        [position]="position"
        [style]="{ width: '25rem' }"
    >
        <span class="p-text-secondary block mb-5">
            Voulez-vous deconnecter ?.
        </span>

        <div class="flex justify-content-end gap-2">
            <p-button
                label="Ignorer"
                severity="secondary"
                (onClick)="visible = false"
            />
            <p-button label="DÃ©connexion" (onClick)="yes()" />
        </div>
    </p-dialog>
    <p-dialog
        header="Notifications"
        [modal]="true"
        [(visible)]="visibleNotification"
        [position]="positionNotification"
        [style]="{ width: '25rem' }"
        [contentStyle]="{ 'overflow-y': 'auto' }"
        resizable="true"
    >
        <ng-container *ngFor="let notification of listReminders">
            <ng-container *ngIf="notification?.reminder?.data?.length">
                <!-- Check if reminder data exists before iterating -->
                <p-card
                    *ngFor="let reminder of notification.reminder.data"
                    class="flex flex-col justify-center items-center p-4 mb-4 bg-gray-50 rounded-lg shadow-md"
                >
                    <div class="flex flex-col gap-2">
                        <p class="text-sm text-gray-600 font-semibold">
                            ID:
                            <span class="text-gray-800">{{
                                reminder._id
                            }}</span>
                        </p>
                        <p class="text-sm text-gray-600 font-semibold">
                            Title:
                            <span class="text-gray-800">{{
                                reminder.title
                            }}</span>
                        </p>
                    </div>
                    <p-button
                        icon="pi pi-check"
                        class="ml-4 text-green-500 hover:text-green-600 transition-colors"
                        (onClick)="markAsSeen(reminder._id)"
                        [disabled]="disabledButtons[reminder._id]"
                    ></p-button>
                </p-card>
            </ng-container>
        </ng-container>
    </p-dialog>
</div>
